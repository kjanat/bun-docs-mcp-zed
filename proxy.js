var P=typeof process<"u"&&process.env?.MCP_SERVER_URL||"https://bun.com/docs/mcp";function K(F,z){console.error(`[BunDocsMCP] ${F}`,z||"")}function X(F){console.log(JSON.stringify(F))}function U(F){let z=F.split(`
`);for(let A of z)if(A.startsWith("data: ")){let N=A.slice(6);try{return JSON.parse(N)}catch{}}return null}async function V(F){try{let z={signal:AbortSignal.timeout(1000),method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json, text/event-stream"},body:JSON.stringify(F),decompress:!0,verbose:!0,keepalive:!1},A=await fetch(P,z);if(!A.ok)throw Error(`HTTP ${A.status}: ${A.statusText}`);if((A.headers.get("content-type")||"").includes("text/event-stream")){let B=A.body?.getReader();if(!B)throw Error("SSE response has no readable body");let W=new TextDecoder,O="",G="";while(!0){let{value:$,done:M}=await B.read();if(M){if(G){let J=U(`data: ${G}

`);if(J)X(J);G=""}break}O+=W.decode($,{stream:!0});let C;while((C=O.indexOf(`
`))!==-1){let J=O.slice(0,C);if(O=O.slice(C+1),J.endsWith("\r"))J=J.slice(0,-1);if(J===""){if(G){let Q=G;G="";try{let L=JSON.parse(Q);X(L)}catch(L){K("Failed to parse SSE event JSON:",L)}}continue}if(J.startsWith(":"))continue;if(J.startsWith("data:")){let Q=J.slice(5);if(Q.startsWith(" "))Q=Q.slice(1);G+=Q;continue}}}}else{let B=await A.json();X(B)}}catch(z){K("HTTP request failed:",z),X({jsonrpc:"2.0",id:F.id,error:{code:-32603,message:`Internal error: ${z instanceof Error?z.message:String(z)}`}})}}async function Z(F){if(!F.trim())return;try{let z=JSON.parse(F);if(z.jsonrpc!=="2.0"||!z.method)throw Error("Invalid JSON-RPC request");await V(z)}catch(z){K("Failed to parse request:",z),X({jsonrpc:"2.0",id:null,error:{code:-32700,message:"Parse error"}})}}async function Y(){if(K("Bun Docs MCP proxy started"),typeof globalThis.Bun<"u"){let A=globalThis.Bun.stdin.stream().getReader(),N=new TextDecoder,B="";try{while(!0){let{value:W,done:O}=await A.read();if(O){if(B.length)await Z(B);break}B+=N.decode(W,{stream:!0});let G;while((G=B.indexOf(`
`))!==-1){let $=B.slice(0,G);B=B.slice(G+1),await Z($)}}}catch(W){K("Fatal error:",W),process.exit(1)}return}try{let z="";if(process.stdin.setEncoding("utf8"),process.stdin.on("data",async(A)=>{z+=A;let N;while((N=z.indexOf(`
`))!==-1){let B=z.slice(0,N);z=z.slice(N+1),await Z(B)}}),process.stdin.on("end",async()=>{if(z.length)await Z(z),z=""}),process.stdin.on("error",(A)=>{K("stdin error:",A),process.exit(1)}),process.stdin.readable&&process.stdin.isPaused?.())process.stdin.resume()}catch(z){K("Fatal error:",z),process.exit(1)}}process.on("SIGINT",()=>{K(`
Received SIGINT, shutting down`),process.exit(0)});process.on("SIGTERM",()=>{K(`
Received SIGTERM, shutting down`),process.exit(0)});Y();

//# debugId=40BE672ED0315FB464756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsicHJveHkudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiLyoqXG4gKiBIVFRQIHRvIHN0ZGlvIHByb3h5IGZvciBCdW4gRG9jcyBNQ1AgU2VydmVyXG4gKlxuICogVGhpcyBwcm94eSBicmlkZ2VzIHRoZSBCdW4gSFRUUCBNQ1Agc2VydmVyIHdpdGggWmVkJ3Mgc3RkaW8tYmFzZWRcbiAqIE1DUCBjbGllbnQuIEl0IGZvcndhcmRzIEpTT04tUlBDIG1lc3NhZ2VzIGJldHdlZW4gc3RkaW4vc3Rkb3V0IGFuZFxuICogdGhlIEhUVFAgZW5kcG9pbnQgYXQgaHR0cHM6Ly9idW4uY29tL2RvY3MvbWNwXG4gKlxuICogV3JpdHRlbiBpbiBUeXBlU2NyaXB0IHVzaW5nIEJ1bidzIG5hdGl2ZSBBUElzIGZvciBvcHRpbWFsIHBlcmZvcm1hbmNlLlxuICovXG5cbi8vIERlZmF1bHQgTUNQIHNlcnZlciBVUkwgd2l0aCBlbnYgb3ZlcnJpZGVcbmNvbnN0IE1DUF9TRVJWRVJfVVJMOiBzdHJpbmcgPVxuICAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnY/Lk1DUF9TRVJWRVJfVVJMKSB8fFxuICBcImh0dHBzOi8vYnVuLmNvbS9kb2NzL21jcFwiO1xuXG4vLyBBbGxvdyBCdW4tc3BlY2lmaWMgZmV0Y2ggb3B0aW9ucyB3aXRob3V0IHVwc2V0dGluZyBUeXBlU2NyaXB0XG50eXBlIEV4dGVuZGVkUmVxdWVzdEluaXQgPSBSZXF1ZXN0SW5pdCAmIHtcbiAgZGVjb21wcmVzcz86IGJvb2xlYW47XG4gIHZlcmJvc2U/OiBib29sZWFuO1xufTtcblxuLyoqXG4gKiBKU09OLVJQQyAyLjAgUmVxdWVzdCB0eXBlc1xuICovXG5pbnRlcmZhY2UgSnNvblJwY1JlcXVlc3Qge1xuICBqc29ucnBjOiBcIjIuMFwiO1xuICBpZDogc3RyaW5nIHwgbnVtYmVyIHwgbnVsbDtcbiAgbWV0aG9kOiBzdHJpbmc7XG4gIHBhcmFtcz86IHVua25vd247XG59XG5cbi8qKlxuICogSlNPTi1SUEMgMi4wIFJlc3BvbnNlIHR5cGVcbiAqL1xuaW50ZXJmYWNlIEpzb25ScGNSZXNwb25zZSB7XG4gIGpzb25ycGM6IFwiMi4wXCI7XG4gIGlkOiBzdHJpbmcgfCBudW1iZXIgfCBudWxsO1xuICByZXN1bHQ/OiB1bmtub3duO1xuICBlcnJvcj86IHtcbiAgICBjb2RlOiBudW1iZXI7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIGRhdGE/OiB1bmtub3duO1xuICB9O1xufVxuXG4vKipcbiAqIExvZyBlcnJvciBtZXNzYWdlIHRvIHN0ZGVyclxuICovXG5mdW5jdGlvbiBsb2dFcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogdW5rbm93bik6IHZvaWQge1xuICBjb25zb2xlLmVycm9yKGBbQnVuRG9jc01DUF0gJHttZXNzYWdlfWAsIGVycm9yIHx8IFwiXCIpO1xufVxuXG4vKipcbiAqIFNlbmQgSlNPTi1SUEMgcmVzcG9uc2UgdG8gc3Rkb3V0XG4gKi9cbmZ1bmN0aW9uIHNlbmRSZXNwb25zZShyZXNwb25zZTogSnNvblJwY1Jlc3BvbnNlKTogdm9pZCB7XG4gIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG59XG5cbi8qKlxuICogUGFyc2UgU1NFIGZvcm1hdHRlZCB0ZXh0IGludG8gSlNPTi1SUEMgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gcGFyc2VTU0Uoc3NlVGV4dDogc3RyaW5nKTogSnNvblJwY1Jlc3BvbnNlIHwgbnVsbCB7XG4gIGNvbnN0IGxpbmVzID0gc3NlVGV4dC5zcGxpdChcIlxcblwiKTtcbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcImRhdGE6IFwiKSkge1xuICAgICAgY29uc3QganNvblN0ciA9IGxpbmUuc2xpY2UoNik7IC8vIFJlbW92ZSBcImRhdGE6IFwiIHByZWZpeFxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvblN0cikgYXMgSnNvblJwY1Jlc3BvbnNlO1xuICAgICAgfSBjYXRjaCB7fVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBGb3J3YXJkIEpTT04tUlBDIHJlcXVlc3QgdG8gdGhlIEhUVFAgc2VydmVyIGFuZCBoYW5kbGUgcmVzcG9uc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZm9yd2FyZFRvSHR0cFNlcnZlcihyZXF1ZXN0OiBKc29uUnBjUmVxdWVzdCk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGluaXQ6IEV4dGVuZGVkUmVxdWVzdEluaXQgPSB7XG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMTAwMCksXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvZXZlbnQtc3RyZWFtXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAvLyBCdW4tc3BlY2lmaWMgZXh0cmFzIChpZ25vcmVkIGJ5IG90aGVyIHJ1bnRpbWVzKVxuICAgICAgZGVjb21wcmVzczogdHJ1ZSxcbiAgICAgIHZlcmJvc2U6IHRydWUsXG4gICAgICAvLyBBdm9pZCBrZWVwYWxpdmUgZm9yIHNpbXBsaWNpdHkgYWNyb3NzIHJ1bnRpbWVzXG4gICAgICBrZWVwYWxpdmU6IGZhbHNlLFxuICAgIH07XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKE1DUF9TRVJWRVJfVVJMLCBpbml0KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpIHx8IFwiXCI7XG5cbiAgICAvLyBIYW5kbGUgU1NFIHJlc3BvbnNlXG4gICAgaWYgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKFwidGV4dC9ldmVudC1zdHJlYW1cIikpIHtcbiAgICAgIC8vIFN0cmVhbSBhbmQgcGFyc2UgU1NFIGluY3JlbWVudGFsbHlcbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHk/LmdldFJlYWRlcigpO1xuICAgICAgaWYgKCFyZWFkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU1NFIHJlc3BvbnNlIGhhcyBubyByZWFkYWJsZSBib2R5XCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICBsZXQgYnVmZmVyID0gXCJcIjtcbiAgICAgIGxldCBldmVudERhdGEgPSBcIlwiO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIC8vIEZsdXNoIGFueSBwZW5kaW5nIGV2ZW50XG4gICAgICAgICAgaWYgKGV2ZW50RGF0YSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHBhcnNlU1NFKGBkYXRhOiAke2V2ZW50RGF0YX1cXG5cXG5gKTtcbiAgICAgICAgICAgIGlmIChkYXRhKSBzZW5kUmVzcG9uc2UoZGF0YSk7XG4gICAgICAgICAgICBldmVudERhdGEgPSBcIlwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG5cbiAgICAgICAgbGV0IGlkeDogbnVtYmVyO1xuICAgICAgICB3aGlsZSAoKGlkeCA9IGJ1ZmZlci5pbmRleE9mKFwiXFxuXCIpKSAhPT0gLTEpIHtcbiAgICAgICAgICBsZXQgbGluZSA9IGJ1ZmZlci5zbGljZSgwLCBpZHgpO1xuICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShpZHggKyAxKTtcblxuICAgICAgICAgIC8vIFRyaW0gdHJhaWxpbmcgQ1JcbiAgICAgICAgICBpZiAobGluZS5lbmRzV2l0aChcIlxcclwiKSkgbGluZSA9IGxpbmUuc2xpY2UoMCwgLTEpO1xuXG4gICAgICAgICAgaWYgKGxpbmUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIC8vIERpc3BhdGNoIGFjY3VtdWxhdGVkIGV2ZW50XG4gICAgICAgICAgICBpZiAoZXZlbnREYXRhKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBldmVudERhdGE7XG4gICAgICAgICAgICAgIGV2ZW50RGF0YSA9IFwiXCI7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uKSBhcyBKc29uUnBjUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHBhcnNlZCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBsb2dFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBTU0UgZXZlbnQgSlNPTjpcIiwgZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCI6XCIpKSB7XG4gICAgICAgICAgICAvLyBDb21tZW50IGxpbmUsIGlnbm9yZVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcImRhdGE6XCIpKSB7XG4gICAgICAgICAgICAvLyBBcHBlbmQgZGF0YSBsaW5lIChzcGVjIGFsbG93cyBtdWx0aXBsZSlcbiAgICAgICAgICAgIGxldCBwYXlsb2FkID0gbGluZS5zbGljZSg1KTsgLy8gYWZ0ZXIgJ2RhdGE6J1xuICAgICAgICAgICAgaWYgKHBheWxvYWQuc3RhcnRzV2l0aChcIiBcIikpIHBheWxvYWQgPSBwYXlsb2FkLnNsaWNlKDEpO1xuICAgICAgICAgICAgZXZlbnREYXRhICs9IHBheWxvYWQ7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBPdGhlciBTU0UgZmllbGRzIChldmVudCwgaWQsIHJldHJ5KSBhcmUgaWdub3JlZCBmb3Igbm93XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSGFuZGxlIHJlZ3VsYXIgSlNPTiByZXNwb25zZVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHNlbmRSZXNwb25zZShkYXRhIGFzIEpzb25ScGNSZXNwb25zZSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ0Vycm9yKFwiSFRUUCByZXF1ZXN0IGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIHNlbmRSZXNwb25zZSh7XG4gICAgICBqc29ucnBjOiBcIjIuMFwiLFxuICAgICAgaWQ6IHJlcXVlc3QuaWQsXG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiAtMzI2MDMsXG4gICAgICAgIG1lc3NhZ2U6IGBJbnRlcm5hbCBlcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuLy8gUHJvY2VzcyBpbmNvbWluZyBKU09OLVJQQyByZXF1ZXN0XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0KGxpbmU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIWxpbmUudHJpbSgpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gSlNPTi5wYXJzZShsaW5lKSBhcyBKc29uUnBjUmVxdWVzdDtcblxuICAgIC8vIFZhbGlkYXRlIEpTT04tUlBDIHN0cnVjdHVyZVxuICAgIGlmIChyZXF1ZXN0Lmpzb25ycGMgIT09IFwiMi4wXCIgfHwgIXJlcXVlc3QubWV0aG9kKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04tUlBDIHJlcXVlc3RcIik7XG4gICAgfVxuXG4gICAgLy8gRm9yd2FyZCBhbGwgcmVxdWVzdHMgdG8gdGhlIEhUVFAgc2VydmVyXG4gICAgYXdhaXQgZm9yd2FyZFRvSHR0cFNlcnZlcihyZXF1ZXN0KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dFcnJvcihcIkZhaWxlZCB0byBwYXJzZSByZXF1ZXN0OlwiLCBlcnJvcik7XG4gICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgIGpzb25ycGM6IFwiMi4wXCIsXG4gICAgICBpZDogbnVsbCxcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IC0zMjcwMCxcbiAgICAgICAgbWVzc2FnZTogXCJQYXJzZSBlcnJvclwiLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBNYWluOiBSZWFkIGZyb20gc3RkaW4gYW5kIHByb2Nlc3MgbGluZSBieSBsaW5lXG5hc3luYyBmdW5jdGlvbiBtYWluKCk6IFByb21pc2U8dm9pZD4ge1xuICBsb2dFcnJvcihcIkJ1biBEb2NzIE1DUCBwcm94eSBzdGFydGVkXCIpO1xuXG4gIC8vIElmIHJ1bm5pbmcgdW5kZXIgQnVuLCB1c2UgaXRzIHN0cmVhbWluZyBzdGRpbiBBUElcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgY29uc3QgaXNCdW4gPSB0eXBlb2YgKGdsb2JhbFRoaXMgYXMgYW55KS5CdW4gIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgaWYgKGlzQnVuKSB7XG4gICAgY29uc3Qgc3RkaW4gPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLkJ1bi5zdGRpbi5zdHJlYW0oKTtcbiAgICBjb25zdCByZWFkZXIgPSBzdGRpbi5nZXRSZWFkZXIoKTtcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgbGV0IGJ1ZmZlciA9IFwiXCI7XG5cbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcblxuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgIC8vIEZsdXNoIGFueSB0cmFpbGluZyBkYXRhXG4gICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlcXVlc3QoYnVmZmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZWNvZGUgY2h1bmsgYW5kIGFwcGVuZCB0byBidWZmZXJcbiAgICAgICAgYnVmZmVyICs9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBQcm9jZXNzIGNvbXBsZXRlIGxpbmVzXG4gICAgICAgIGxldCBuZXdsaW5lSW5kZXg6IG51bWJlcjtcbiAgICAgICAgd2hpbGUgKChuZXdsaW5lSW5kZXggPSBidWZmZXIuaW5kZXhPZihcIlxcblwiKSkgIT09IC0xKSB7XG4gICAgICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlci5zbGljZSgwLCBuZXdsaW5lSW5kZXgpO1xuICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShuZXdsaW5lSW5kZXggKyAxKTtcblxuICAgICAgICAgIGF3YWl0IGhhbmRsZVJlcXVlc3QobGluZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nRXJyb3IoXCJGYXRhbCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBOb2RlLmpzIGZhbGxiYWNrOiBwcm9jZXNzIHN0ZGluIGluIGZsb3dpbmcgbW9kZVxuICB0cnkge1xuICAgIGxldCBidWZmZXIgPSBcIlwiO1xuXG4gICAgLy8gRW5zdXJlIHV0Zjggc3RyaW5nc1xuICAgIHByb2Nlc3Muc3RkaW4uc2V0RW5jb2RpbmcoXCJ1dGY4XCIpO1xuXG4gICAgcHJvY2Vzcy5zdGRpbi5vbihcImRhdGFcIiwgYXN5bmMgKGNodW5rOiBzdHJpbmcpID0+IHtcbiAgICAgIGJ1ZmZlciArPSBjaHVuaztcblxuICAgICAgbGV0IGlkeDogbnVtYmVyO1xuICAgICAgd2hpbGUgKChpZHggPSBidWZmZXIuaW5kZXhPZihcIlxcblwiKSkgIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIuc2xpY2UoMCwgaWR4KTtcbiAgICAgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGlkeCArIDEpO1xuICAgICAgICBhd2FpdCBoYW5kbGVSZXF1ZXN0KGxpbmUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcHJvY2Vzcy5zdGRpbi5vbihcImVuZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICBhd2FpdCBoYW5kbGVSZXF1ZXN0KGJ1ZmZlcik7XG4gICAgICAgIGJ1ZmZlciA9IFwiXCI7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBwcm9jZXNzLnN0ZGluLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgbG9nRXJyb3IoXCJzdGRpbiBlcnJvcjpcIiwgZXJyKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcblxuICAgIC8vIElmIGlucHV0IGlzIGFscmVhZHkgZW5kZWQgKGUuZy4sIG5vIFRUWSksIHJlc3VtZSB0byByZWNlaXZlICdlbmQnXG4gICAgaWYgKHByb2Nlc3Muc3RkaW4ucmVhZGFibGUgJiYgKHByb2Nlc3Muc3RkaW4gYXMgYW55KS5pc1BhdXNlZD8uKCkpIHtcbiAgICAgIHByb2Nlc3Muc3RkaW4ucmVzdW1lKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ0Vycm9yKFwiRmF0YWwgZXJyb3I6XCIsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLy8gSGFuZGxlIHByb2Nlc3MgdGVybWluYXRpb25cbnByb2Nlc3Mub24oXCJTSUdJTlRcIiwgKCkgPT4ge1xuICBsb2dFcnJvcihcIlxcblJlY2VpdmVkIFNJR0lOVCwgc2h1dHRpbmcgZG93blwiKTtcbiAgcHJvY2Vzcy5leGl0KDApO1xufSk7XG5cbnByb2Nlc3Mub24oXCJTSUdURVJNXCIsICgpID0+IHtcbiAgbG9nRXJyb3IoXCJcXG5SZWNlaXZlZCBTSUdURVJNLCBzaHV0dGluZyBkb3duXCIpO1xuICBwcm9jZXNzLmV4aXQoMCk7XG59KTtcblxuLy8gU3RhcnQgdGhlIHByb3h5XG52b2lkIG1haW4oKTtcbiIKICBdLAogICJtYXBwaW5ncyI6ICJBQVdBLElBQU0sRUFDSCxPQUFPLFFBQVksS0FBZSxRQUFRLEtBQUssZ0JBQ2hELDJCQW1DRixTQUFTLENBQVEsQ0FBQyxFQUFpQixFQUF1QixDQUN4RCxRQUFRLE1BQU0sZ0JBQWdCLElBQVcsR0FBUyxFQUFFLEVBTXRELFNBQVMsQ0FBWSxDQUFDLEVBQWlDLENBQ3JELFFBQVEsSUFBSSxLQUFLLFVBQVUsQ0FBUSxDQUFDLEVBTXRDLFNBQVMsQ0FBUSxDQUFDLEVBQXlDLENBQ3pELElBQU0sRUFBUSxFQUFRLE1BQU07QUFBQSxDQUFJLEVBQ2hDLFFBQVcsS0FBUSxFQUNqQixHQUFJLEVBQUssV0FBVyxRQUFRLEVBQUcsQ0FDN0IsSUFBTSxFQUFVLEVBQUssTUFBTSxDQUFDLEVBQzVCLEdBQUksQ0FDRixPQUFPLEtBQUssTUFBTSxDQUFPLEVBQ3pCLEtBQU0sR0FHWixPQUFPLEtBTVQsZUFBZSxDQUFtQixDQUFDLEVBQXdDLENB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LEdBQU0sQ0FDWCxJQUFRLFFBQU8sUUFBUyxNQUFNLEVBQU8sS0FBSyxFQUUxQyxHQUFJLEVBQU0sQ0FFUixHQUFJLEVBQU8sT0FDVCxNQUFNLEVBQWMsQ0FBTSxFQUU1QixNQUlGLEdBQVUsRUFBUSxPQUFPLEVBQU8sQ0FBRSxPQUFRLEVBQUssQ0FBQyxFQUdoRCxJQUFJLEVBQ0osT0FBUSxFQUFlLEVBQU8sUUFBUTtBQUFBLENBQUksS0FBTyxHQUFJLENBQ25ELElBQU0sRUFBTyxFQUFPLE1BQU0sRUFBRyxDQUFZLEVBQ3pDLEVBQVMsRUFBTyxNQUFNLEVBQWUsQ0FBQyxFQUV0QyxNQUFNLEVBQWMsQ0FBSSxJQUc1QixNQUFPLEVBQU8sQ0FDZCxFQUFTLGVBQWdCLENBQUssRUFDOUIsUUFBUSxLQUFLLENBQUMsRUFFaEIsT0FJRixHQUFJLENBQ0YsSUFBSSxFQUFTLEdBNkJiLEdBMUJBLFFBQVEsTUFBTSxZQUFZLE1BQU0sRUFFaEMsUUFBUSxNQUFNLEdBQUcsT0FBUSxNQUFPLElBQWtCLENBQ2hELEdBQVUsRUFFVixJQUFJLEVBQ0osT0FBUSxFQUFNLEVBQU8sUUFBUTtBQUFBLENBQUksS0FBTyxHQUFJLENBQzFDLElBQU0sRUFBTyxFQUFPLE1BQU0sRUFBRyxDQUFHLEVBQ2hDLEVBQVMsRUFBTyxNQUFNLEVBQU0sQ0FBQyxFQUM3QixNQUFNLEVBQWMsQ0FBSSxHQUUzQixFQUVELFFBQVEsTUFBTSxHQUFHLE1BQU8sU0FBWSxDQUNsQyxHQUFJLEVBQU8sT0FDVCxNQUFNLEVBQWMsQ0FBTSxFQUMxQixFQUFTLEdBRVosRUFFRCxRQUFRLE1BQU0sR0FBRyxRQUFTLENBQUMsSUFBUSxDQUNqQyxFQUFTLGVBQWdCLENBQUcsRUFDNUIsUUFBUSxLQUFLLENBQUMsRUFDZixFQUdHLFFBQVEsTUFBTSxVQUFhLFFBQVEsTUFBYyxXQUFXLEVBQzlELFFBQVEsTUFBTSxPQUFPLEVBRXZCLE1BQU8sRUFBTyxDQUNkLEVBQVMsZUFBZ0IsQ0FBSyxFQUM5QixRQUFRLEtBQUssQ0FBQyxHQUtsQixRQUFRLEdBQUcsU0FBVSxJQUFNLENBQ3pCLEVBQVM7QUFBQSwrQkFBa0MsRUFDM0MsUUFBUSxLQUFLLENBQUMsRUFDZixFQUVELFFBQVEsR0FBRyxVQUFXLElBQU0sQ0FDMUIsRUFBUztBQUFBLGdDQUFtQyxFQUM1QyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBR0ksRUFBSyIsCiAgImRlYnVnSWQiOiAiNDBCRTY3MkVEMDMxNUZCNDY0NzU2RTIxNjQ3NTZFMjEiLAogICJuYW1lcyI6IFtdCn0=
